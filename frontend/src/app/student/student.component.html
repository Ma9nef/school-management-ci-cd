<div class="container mt-5">

  <h2 class="text-center mb-4">Gestion des √âtudiants</h2>

  <!-- üîπ Formulaire d'ajout / modification -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">

      <form (ngSubmit)="addStudent()" class="row g-3 align-items-center">

        <!-- Nom -->
        <div class="col-md-3">
          <input
            type="text"
            [(ngModel)]="newStudent.name"
            name="name"
            class="form-control"
            placeholder="Nom"
            required
          >
        </div>

        <!-- Pr√©nom -->
        <div class="col-md-3">
          <input
            type="text"
            [(ngModel)]="newStudent.prenom"
            name="prenom"
            class="form-control"
            placeholder="Pr√©nom"
            required
          >
        </div>

        <!-- √Çge -->
        <div class="col-md-2">
          <input
            type="number"
            [(ngModel)]="newStudent.age"
            name="age"
            class="form-control"
            placeholder="√Çge"
            required
          >
        </div>

        <!-- Classe dropdown -->
        <div class="col-md-3">
          <select
            [(ngModel)]="newStudent.classe"
            name="classe"
            class="form-select"
          >
            <option [ngValue]="null" disabled selected>Choisir une classe</option>
            <option *ngFor="let c of classes" [ngValue]="c">
              {{ c.nom }} ({{ c.niveau }})
            </option>
          </select>
        </div>

        <!-- Bouton ajouter / modifier -->
        <div class="col-md-1 d-grid">
          <button type="submit" class="btn btn-success">
            {{ editingStudent ? '‚úîÔ∏è' : '‚ûï' }}
          </button>
        </div>

      </form>

      <!-- Bouton annuler -->
      <div *ngIf="editingStudent" class="mt-3 text-center">
        <button class="btn btn-outline-secondary btn-sm" (click)="cancelEdit()">
          Annuler la modification
        </button>
      </div>

    </div>
  </div>

  <!-- üîπ Tableau des √©tudiants -->
  <div class="card shadow-sm">
    <div class="card-body">

      <table class="table table-hover text-center align-middle">
        <thead class="table-dark">
          <tr>
            <th>Nom</th>
            <th>Pr√©nom</th>
            <th>√Çge</th>
            <th>Classe</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>

          <tr *ngFor="let s of students">
            <td>{{ s.name }}</td>
            <td>{{ s.prenom }}</td>
            <td>{{ s.age }}</td>
            <td>{{ s.classe?.nom || '‚Äî' }}</td>

            <td>
              <button class="btn btn-outline-primary btn-sm me-2" (click)="editStudent(s)">
                ‚úèÔ∏è
              </button>

              <button class="btn btn-outline-danger btn-sm" (click)="deleteStudent(s.id!)">
                üóëÔ∏è
              </button>
            </td>

          </tr>

        </tbody>
      </table>

      <div *ngIf="students.length === 0" class="text-center text-muted">
        Aucun √©tudiant trouv√©.
      </div>

    </div>
  </div>

</div>
